AWSTemplateFormatVersion: "2010-09-09"
Parameters:
  BucketName:
    Type: String

Resources:
  FileSystemBucket:
    Type: AWS::S3::Bucket
    Properties:
      BucketName: !Ref BucketName
      PublicAccessBlockConfiguration:
        BlockPublicAcls: TRUE
        BlockPublicPolicy: TRUE
        IgnorePublicAcls: TRUE
        RestrictPublicBuckets: TRUE
      LifecycleConfiguration:
        Rules:
          - Id: dataset_transitions
            Prefix: dataset/
            Status: Enabled
            Transitions: 
              - StorageClass: INTELLIGENT_TIERING
                TransitionInDays: 1
          - Id: archive_transitions
            Prefix: archive/
            Status: Disabled
            Transitions:
              - StorageClass: GLACIER
                TransitionInDays: 90
Outputs:
  BucketName:
    Value: !Ref FileSystemBucket
